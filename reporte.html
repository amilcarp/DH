<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
	    <meta http-equiv="X-UA-Compatible" content="IE=edge">
	    <meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Generación de reporte - Evaluación de Derechos Humanos</title>
		
		<!-- CSS -->
	    <link href="/favicon.ico" rel="shortcut icon">
	    <link href="https://framework-gb.cdn.gob.mx/assets/styles/main.css" rel="stylesheet">
	    
	    <link href="css/generales.css" rel="stylesheet">
		
		<!-- Respond.js soporte de media queries para Internet Explorer 8 -->
	    <!-- ie8.js EventTarget para cada nodo en Internet Explorer 8 -->
	    <!--[if lt IE 9]>
	      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	      <script src="https://cdnjs.cloudflare.com/ajax/libs/ie8/0.2.2/ie8.js"></script>
	    <![endif]-->
	</head>
	<body>
		
		<!-- Contenido -->
	    <main class="page">
		    
		    
		    <nav class="navbar navbar-inverse sub-navbar navbar-fixed-top">
			  <div class="container">
			    <div class="navbar-header">
			      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#subenlaces">
			        <span class="sr-only">Interruptor de Navegación</span>
			        <span class="icon-bar"></span>
			        <span class="icon-bar"></span>
			        <span class="icon-bar"></span>
			      </button>
			      <a class="navbar-brand" href="index.html"><img src="img/DH.png" alt="" class="logomenu" /></a>
			    </div>
			    <div class="collapse navbar-collapse" id="subenlaces">
			      <ul class="nav navbar-nav navbar-right">
			        <li><a href="acerca.html" >Acerca de</a></li>
			        <li><a href="derechos.html">Derechos</a></li>
<!--			        <li><a href="calendario.html">Calendario</a></li>-->
			        <li><a href="descarga.html">Descarga masiva</a></li>
			        <li><a href="contacto.html">Contacto</a></li>
			        <li><a href="busqueda.html"><span class="icon-search" aria-hidden="true"></span></a></li>
			      </ul>
			    </div>
			  </div>
			</nav>
		    
		  
<!--
			<div class="row header">
		      <div class="col-md-12 titulo-header">
			      <h1>Acerca de</h1>
		      </div>
	      	</div>
-->
			<br/><br/>
			<div class="container">
				<ol class="breadcrumb">
					<li><a href="index.html"><i class="icon icon-home"></i></a></li>
					<li class="active">Reporte</li>
				</ol>
			</div>
		    
	      <div class="container">
		      <br /><br />
		  	<!-- Inicia Bloque -->
              
              
		      <div class="row">
			      <div class="col-md-12">
				      <h1>Generación de reporte</h1>
				      <hr />
                      
                      <div class="row">
					      <h3>Ficha del reporte</h3>
					     <table class="table">
                             <tr>
                                <td>Total de Derechos en la plataforma:</td>
                                <td class="derechosNombre">Culturales, Medio Ambiente, Trabajo, Alimentación y Sindicales</td>
                             </tr>
                             <tr>
                                <td>Total de Indicadores en la Plataforma:</td>
                                <td class="totalInd">415</td>
                             </tr>
                             <tr>
                                <td>Total de Indicadores Cualitativos:</td>
                                <td class="indCualis">281 (281 activos)</td>
                             </tr>
                             <tr>
                                <td>Total de i¡Indicadores Cuantitativos:</td>
                                <td class="indCuantis">134 (18 activos)</td>
                             </tr>
                             <tr>
                                <td>Indicadores por Derecho</td>
                                <td class="derechoCantidad">
                                    <b>Culturales:</b> 105<br>
                                    <b>Medio Ambiente:</b> 100<br>
                                    <b>Trabajo:</b> 81<br>
                                    <b>Alimentación:</b> 76<br>
                                    <b>Sindicales:</b> 53<br>
                                 </td>
                             </tr>
                             <tr>
                                <td>Indicadores por Entidad</td>
                                <td>
                                    <b>XXXXX:</b> 0<br>
                                    <b>XXXXX:</b> 0<br>
                                    <b>XXXXX:</b> 0<br>
                                 </td>
                             </tr>
                        </table>

                          
				      </div>
                      
                      
				      <div class="row">
                          <p>Para generar un listado de los elementos a descargar debes seguir los siguientes pasos:</p>
                          <ol>
                            <li>Selecciona los indicadores de los que quieres descargar información</li>
                            <li>Elije el tipo de información que quieres descargar (Tabulados, Gráficas y/o Mapas)</li>
                              <li>Selecciona el formato de descarga</li>
                              <li>Presiona el botón de "Generar Reporte"</li>
                          </ol>
                          <br/>
					      <div class="">
						      <h6>Elementos a exportar</h6>
					      </div>
					      <div class="col-md-2">
						      <div class="checkbox">
							    <label>
							      <input type="checkbox">
							      Tabulados
							    </label>
							  </div>
					      </div>
					      <div class="col-md-2">
							  <div class="checkbox">
							    <label>
							      <input type="checkbox">
							      Gráficas
							    </label>
							  </div>
					      </div>
					      <div class="col-md-2">
							  <div class="checkbox">
							    <label>
							      <input type="checkbox">
							      Mapas
							    </label>
							  </div>
					      </div>
					      <div class="col-md-2">
							  <select class="form-control" placeholder="Tipo de formato">
								  <option>XLS</option>
								  <option>CSV</option>
								</select>
					      </div>
					      <div class="col-md-4">
						      <button type="button" class="btn btn-primary" onclick="alert('Debe seleccionar al menos 1 indicador para generar la descarga.')">Generar insumos para el reporte</button>
					      </div>
					  	
				      </div>
				      <br />
                      
                      <div class="row internoDerecho" >
                        <div class="example">
                            <div style="padding:15px 0;"><span>Mostrar sólo: </span><a class="btn btn-primary verCuantis">Indicadores cuantitativos</a> <a class="btn btn-primary verCualis">Indicadores cualitativos</a></div>
                            <br />
                            <div class="panel-group ficha-collapse" id="accordion">
                                
                            </div> 

                    </div> 
            </div>
                      
                      <br /><br />
				      
			      </div>
		      </div>
		      <!-- Termina Bloque -->      
		      
	      </div>
		  <br /><br />
            
<!--            Se crea la tabla para la descarga del reporte-->
            
            
            

	    </main>
	
	    <!-- JS -->
	    <script src="https://framework-gb.cdn.gob.mx/gobmx.js"></script>
	    <script src="https://code.jquery.com/jquery-3.3.1.min.js"
			  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
			  crossorigin="anonymous"></script>
	    <script src="js/main.js"></script>
        <script src="js/consultas.js"></script>
        <script>
            
            var todosInd = [];
            
            // Solucionar Bug número de indicadores
//            for (var f=1;f<415;f++){
//                if(f === 100){
//                   
//                }
//                   
//                $.ajax({
//                  type: 'GET',
//                  url: pathAPI + "search?q=*:*&offset=0&rows=100",
//                  data: {},
//                  success: function( data, textStatus, jqxhr ) { 
//                      todosInd += data;
//                  },
//                    async: true
//                });
//            }
//            
            var colap = '';
            var indDer = ['Culturales','Medio Ambiente','Trabajo','Alimentación','Sindicales'];
            
            function listaInd(){
                for(var i=0;i<indDer.length;i++){
                    colap += '<div class="panel panel-default">'+
                            '        <div class="panel-heading d'+(i+1)+'">'+
                            '            <h4 class="panel-title">'+
                            '                <a data-parent="#accordion" data-toggle="collapse" href="#panel-0'+i+'" aria-expanded="false" aria-controls="panel-0'+i+'" style="color:#ffffff;">'+indDer[i]+'</a>'+
                            '            </h4>'+
                            '            <button type="button" class="collpase-button collapsed" data-parent="#accordion" data-toggle="collapse" href="#panel-0'+i+'"></button>'+
                            '        </div>'+
                            '        <div class="panel-collapse collapse" id="panel-0'+i+'">'+
                            '            <div class="panel-body">'+
                            '                <div id="cargaDat'+i+'">'+getValores(indDer[i])+'</div>'+
                            '            </div>'+
                            '        </div>'+
                            '    </div>';
                }
                return colap;
            }
            
            function getValores(derecho){
                var valores = '';
                console.log(pathAPI);
                console.log(derecho);
        //var derecho = "Medio Ambiente";
        //var id_derecho = 5;
         $.ajax({
		  type: 'GET',
		  url: pathAPI + "search?q=right_name_short_lit:"+derecho+"&rows=100",
             //url: pathAPI + "search?q=right_id:"+derecho+"&rows=100",
		  data: {},
		  success: function( data, textStatus, jqxhr ) {   

              tipoDer = data['results']['records'];
              
              console.log(tipoDer);
              for(var g = 0;g<tipoDer.length;g++){
                if(tipoDer[g].is_cuantitative === true && tipoDer[g].breakdown_attribute_result != null){
                    valores += '<div class="CT"><input type="checkbox" name="'+tipoDer[g].indicator_code+'"> ' + tipoDer[g].indicator_code + ' - ' + tipoDer[g].indicator_name + ' <span class="d1" style="color:#fff;padding:3px 5px;font-size:11px;border-radius:4px;" title="Indicador Cuantitativo">CT</span><br /></div>';
                 }else if(tipoDer[g].is_cuantitative === false){
                      valores += '<div class="CL"><input type="checkbox" name="'+tipoDer[g].indicator_code+'"> ' + tipoDer[g].indicator_code + ' - ' + tipoDer[g].indicator_name + ' <span class="d1" title="Indicador Cualitativo" style="color:#fff;opacity:0.7;padding:3px 5px;font-size:11px;border-radius:4px;">CL</span><br /></div>';
                          }
              }
                
		  },
		  async:false
		});
                console.log(valores);
                return valores;
    }
            
            $('#accordion').html(listaInd());
            
            $(".verCualis").on("click",function(){
                $(".CL").show();
                $(".CT").hide();
            });
            
            $(".verCuantis").on("click",function(){
                $(".CL").hide();
                $(".CT").show();
            });
            
            
            
        </script>
		
	</body>
</html>