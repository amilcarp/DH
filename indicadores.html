<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
	    <meta http-equiv="X-UA-Compatible" content="IE=edge">
	    <meta name="viewport" content="width=device-width, initial-scale=1">
		<title id="tInd"> - Evaluación de Derechos Humanos</title>
		
		<!-- CSS -->
	    <link href="/favicon.ico" rel="shortcut icon">
	    <link href="https://framework-gb.cdn.gob.mx/assets/styles/main.css" rel="stylesheet">
	    
	    <link href="css/generales.css" rel="stylesheet">
        
        <!-- mapa -->
        <link rel="stylesheet" href="https://npmcdn.com/leaflet@1.0.0-rc.3/dist/leaflet.css" />
      
        <!-- Load c3.css -->
        <!-- <link href="css/c3.css" rel="stylesheet" type="text/css"> -->
        <link href="css/billboard.css" rel="stylesheet" type="text/css">
		
        
        <style>
                #map {
                  width: 100%;
                  height: 600px;
                  overflow: hidden;
                }
            
                #map_compara {
                  width: 100%;
                  height: 600px;
                  overflow: hidden;
                }
            
                .info,
                .info-explora {
                  padding: 6px 8px;
                  font: 14px/16px Arial, Helvetica, sans-serif;
                  border-radius: 5px;
                }
            
                .info2-explora,
                .info2 {
                  padding: 6px 8px;
                  font: 10px/16px Arial, Helvetica, sans-serif;
                  background-color: rgba(255, 255, 255, 0.8);
                  border-radius: 0 0 5px 5px;
                  margin-top: 0 !important;
                  width: 291px;
                }
            
                .infos,
                .infos-explora {
                  padding: 6px 7.5px;
                  font: 14px/16px Arial, Helvetica, sans-serif;
                  background-color: rgba(255, 255, 255, 0.8);
                  box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
                  border-radius: 5px 5px 0 0;
                  width: 291px;
                }
            
                .info h4,
                .info-explora h4 {
                  margin: 0 0 5px;
                  color: #777;
                }
            
                .legend {
                  text-align: left;
                  line-height: 18px;
                  color: #555;
                }
            
                .legend i {
                  width: 18px;
                  height: 18px;
                  float: left;
                  margin-right: 4.0pc;
                  opacity: 1;
                }
            
                .c3-ygrids line {
                  stroke-dasharray: 1;
                  stroke: #dedbdb;
                }
            
                .c3-xgrid-focus line {
                  stroke: #dedbdb;
                }
            
                g .leaflet-interactive {
                  stroke-dasharray: 0 !important;
                }
            
                .highlighted {
                  fill: rgb(226, 204, 6);
                }
            
                .bullets-container{
                  top:50%;
                }
            
                @media only screen and (max-width: 1555px) {
                    .bullets-container{
                      display: none;
                    }
            }
            @media only screen and (max-width:460px){
                    a.selected {
                      background-color:#1F75CC;
                      color:white;
                      z-index:100;
                      right:0;
                      bottom:15%;
                      position:absolute;
                    }
                     #contact{
                       position: absolute;
                        right: 0;
                        bottom: 15%;
                        background:#EFD331;
                        color:#ffffff;
                        padding:5px 10px;
                        text-decoration:none;
                        z-index: 99999;
                     }
            
                     #contact img{
                       padding: 8px;
                       max-width: 35px;
                     }
            
                    .disclaimer {
                      background-color:#FFFFFF;
                      cursor:default;
                      display:none;
                      margin-top: 0px;
                      text-align:left;
                      width:70%;
                      z-index:50;
                      padding: 15px 25px;
                      right:55px;
                      bottom:15%;
                      position:absolute;
                      z-index: 99999;
                    }
            
                    label {
                      display: block;
                      margin-bottom: 3px;
                      padding-left: 15px;
                      text-indent: -15px;
                    }
            
            
                    .disclaimer p, .disclaimer.div {
                      margin: 8px 0;
                      padding-bottom: 8px;
                      font-family:'Helvetica';
                      font-weight:300;
                      text-align:justify;
                    }
            
                    .disclaimer h1{
                      font-size:20px;
                      font-family:'Helvetica';
                      font-weight:800;
                    }
            
                    .obj_descrip{
                      height: 450px !important;
                    }
                    .obj_descrip div{
                      height: 396px !important;
                    }
            
                }
            
                .bigfoot-footnote__container, .bigfoot-footnote__wrapper, .bigfoot-footnote__content
                {
                  margin: 0 !important;
                }
            
                aside[data-footnote-identifier="2"]
                {
                  width: 600px;
                  height: 400px;
                  text-align: left;
                }
                aside[data-footnote-identifier="2"] > .bigfoot-footnote__wrapper, .bigfoot-footnote__content
                {
                  max-height: 400px;
                  width: 600px;
                  height: 400px;
                  text-align: left;
                }
           
                aside[data-footnote-identifier="4"]
                {
                  width: 600px;
                  height: 400px;
                  text-align: left;
                }
                aside[data-footnote-identifier="4"] > .bigfoot-footnote__wrapper, .bigfoot-footnote__content
                {
                  max-height: 400px;
                  width: 600px;
                  height: 400px;
                  text-align: left;
                }
            
                aside[data-footnote-identifier="5"]
                {
                  width: 600px;
                  height: 400px;
                  text-align: left;
                }
                aside[data-footnote-identifier="5"] > .bigfoot-footnote__wrapper, .bigfoot-footnote__content
                {
                  max-height: 400px;
                  width: 600px;
                  height: 400px;
                  text-align: left;
                }
            
                aside[data-footnote-identifier="1"]
                {
                  width: 400px;
                  height: 100px;
                  text-align: left;
                }
                aside[data-footnote-identifier="1"]   .bigfoot-footnote__content, .bigfoot-footnote__wrapper
                {
                  max-height: 100px;
                  width: 400px;
                  height: 100px;
                  text-align: center;
                }
            
                aside[data-footnote-identifier="1"]   .bigfoot-footnote__content
                {
                  color: black !important;
                }
            
                button[data-footnote-identifier="1"]
                {
                  background-color: white;
                  color: black;
                }
           
                aside[data-footnote-identifier="3"]
                {
                  width: 400px;
                  height: 120px;
                  text-align: left;
                }
            
                aside[data-footnote-identifier="3"]   .bigfoot-footnote__content, .bigfoot-footnote__wrapper
                {
                  max-height: 120px;
                  width: 400px;
                  height: 120px;
                  text-align: center;
                }
            
                #obje_tool > a
                {
                  color: white !important;
                }
            
            
              </style>
        
        
        <style>
        .bar {
          fill: rgba(71, 73, 160,1);
        }
        .bar:hover {
          fill: rgba(71, 73, 160,0.8);
        }
        .axis--x path {
          display: block;
        }

/*
        .bar {
          fill: #a1b5c0;
        }

        .bar:hover {
          fill: #DAE3E8;
        }
*/

        .axis--x path {
          display: none;
        }

        p {
            font-size: 11pt;
            color: gray;
        }

        svg {
            background-color: white;
        }

        circle {
            stroke-width: 1;
        }

        circle.hombres {
            fill: #999;
        }

        circle.mujeres {
            fill: rgba(71, 73, 160,1);
            opacity: 1;
        }

        circle:hover {
            stroke-width: 3;
            stroke: white;
        }

        line.grid {
            stroke: #eee;
        }

        line.between {
            stroke: black;
        }

        .axis path,
        .axis line {
            fill: none;
            stroke: black;
            shape-rendering: crispEdges;
        }

        .axis text {
            font-size: 11px;
        }

        .xlabel {
            font-size: 11px;
            color: gray;
        }

        .tick line{
          opacity: 0.1;
          stroke-width: 0.5;
        }
        .tipsy {  padding: 5px; z-index: 100000;top:0;right:0; }
        .tipsy-inner {  text-align: center; position:absolute; }

        /* PARA ANIMAR GráFICA DE LINEA */

        .line {
            fill: none;
            /*stroke: #aaa;
            stroke: #43484c;
            stroke: #405275;
            stroke: rgba(40, 53, 79, .95);
            stroke: #161719;
            stroke: #f99e1a;*/
            stroke: rgba(71, 73, 160,1);
            stroke-width: 5px;
            stroke-dasharray:1400;
            stroke-dashoffset: 0;
            animation: dash 1.5s 1 linear normal;
            -webkit-animation-fill-mode: forwards; /* Safari 4.0 - 8.0 */
            animation-fill-mode: forwards;


        }

        @keyframes dash{
            0%{
                stroke-dashoffset: 1400;
            }
            100%{
                stroke-dashoffset:  0;
            }
        }


        .toolTip {
          position: absolute;
          display: none;
          min-width: 50px;
          height: auto;
          background: none repeat scroll 0 0 #ffffff;
          border: 1px solid #a1b5c0;
          padding: 5px;
          text-align: center;
            font-size: 12px;
        }
            
            
             .grid-line {
      stroke: black;
      opacity: 0.2;
    }
    
    .rect-label {
      stroke: black;
    }
    
    .selection-line {
      stroke: black;
      stroke-dasharray: 5,5;
    }
    
    .hover-label {
      background-color: blue;
    }
    
    .lollipop-line {
      stroke: black;
      stroke-width: 1px;
        stroke-dasharray:2,2;
    }
    
    circle {
      stroke-width: 1px;
      stroke: white;
    }
    
    circle.lollipop-start {
      fill: rgba(71, 73, 160,1);
    }
    
    .lollipop-end {
      fill: rgba(71, 73, 160,0.8);
    }
        
    .lollipop-median {
      fill: white;
    }

	</style>
            
        
		<!-- Respond.js soporte de media queries para Internet Explorer 8 -->
	    <!-- ie8.js EventTarget para cada nodo en Internet Explorer 8 -->
	    <!--[if lt IE 9]>
	      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	      <script src="https://cdnjs.cloudflare.com/ajax/libs/ie8/0.2.2/ie8.js"></script>
	    <![endif]-->
	</head>
	<body>
		
		<!-- Contenido -->
	    <main class="page" style="padding-top: 60px;">
		    
		    <nav class="navbar navbar-inverse sub-navbar navbar-fixed-top">
			  <div class="container">
			    <div class="navbar-header">
			      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#subenlaces">
			        <span class="sr-only">Interruptor de Navegación</span>
			        <span class="icon-bar"></span>
			        <span class="icon-bar"></span>
			        <span class="icon-bar"></span>
			      </button>
			      <a class="navbar-brand" href="index.html"><img src="img/DH.png" alt="" class="logomenu" /></a>
			    </div>
			    <div class="collapse navbar-collapse" id="subenlaces">
			      <ul class="nav navbar-nav navbar-right">
			        <li><a href="acerca.html" >Acerca de</a></li>
			        <li class="active"><a href="derechos.html">Derechos</a></li>
<!--			        <li><a href="calendario.html">Calendario</a></li>-->
			        <li><a href="descarga.html">Descarga masiva</a></li>
			        <li><a href="contacto.html">Contacto</a></li>
			        <li><a href="busqueda.html"><span class="icon-search" aria-hidden="true"></span></a></li>
			      </ul>
			    </div>
			  </div>
			</nav>
		    
		  
<!--
			<div class="row header">
		      <div class="col-md-12 titulo-header">
			      <h1>Acerca de</h1>
		      </div>
	      	</div>
-->         
            
			<div class="container">
				<ol class="breadcrumb">
				<li><a href="index.html"><i class="icon icon-home"></i> Home</a></li>
				<li class=""><a href="derechos.html">Derechos</a></li>
                    <li class=""><span id="categoriaInd">...</span></li>
                <li class="active"><span id="claveInd">...</span></li>
				</ol>
			</div>
		    
	      <div class="container">
              
              <div id="indicadores"></div>
		  	
		      <br /><br />	      
		      
              <!-- Inicia Bloque -->
		      <div class="row descargaIndividual">
			      <div class="col-md-12">
				      <h2>Cargando información...</h2>
			      </div>
		      </div>
              
              
	      </div>
		  <br /><br />

	    </main>
	
	    <!-- JS -->
        <script src="https://code.jquery.com/jquery-3.3.1.min.js"
			  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
			  crossorigin="anonymous"></script>
	    <script src="https://framework-gb.cdn.gob.mx/gobmx.js"></script>
        <script src="https://momentjs.com/downloads/moment.min.js"></script>
	    <script src="https://d3js.org/d3.v4.min.js"></script>
        <script src="js/excellentexport.js"></script>
        <script src="js/pace.min.js"></script>
        
        <script src="js/main.js"></script>
        <script src="js/indicadores.js"></script>
        <script src="js/graficas.js"></script>
        <!-- scrips para el mapa -->
        <script src="https://npmcdn.com/leaflet@1.0.0-rc.3/dist/leaflet.js"></script>
        <script type="text/javascript" src="json/entidad2.json"></script>
        <script src="js/billboard.js"></script>
        <script src="js/classybrew/build/classybrew.min.js"></script>
        <script src="js/data.js"></script>
        <script src='js/funcionesApi.js'></script>
        
          <!-- saveSvgAsPng - https://github.com/exupero/saveSvgAsPng -->
<script>
  (function() {
    var out$ = typeof exports != 'undefined' && exports || typeof define != 'undefined' && {} || this;

    var doctype = '<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">';

    function isExternal(url) {
      return url && url.lastIndexOf('http',0) == 0 && url.lastIndexOf(window.location.host) == -1;
    }

    function inlineImages(el, callback) {
      var images = el.querySelectorAll('image');
      var left = images.length;
      if (left == 0) {
        callback();
      }
      for (var i = 0; i < images.length; i++) {
        (function(image) {
          var href = image.getAttributeNS("http://www.w3.org/1999/xlink", "href");
          if (href) {
            if (isExternal(href.value)) {
              console.warn("Cannot render embedded images linking to external hosts: "+href.value);
              return;
            }
          }
          var canvas = document.createElement('canvas');
          var ctx = canvas.getContext('2d');
          var img = new Image();
          href = href || image.getAttribute('href');
          img.src = href;
          img.onload = function() {
            canvas.width = img.width;
            canvas.height = img.height;
            ctx.drawImage(img, 0, 0);
            image.setAttributeNS("http://www.w3.org/1999/xlink", "href", canvas.toDataURL('image/png'));
            left--;
            if (left == 0) {
              callback();
            }
          }
          img.onerror = function() {
            console.log("Could not load "+href);
            left--;
            if (left == 0) {
              callback();
            }
          }
        })(images[i]);
      }
    }

    function styles(el, selectorRemap) {
      var css = "";
      var sheets = document.styleSheets;
      for (var i = 0; i < sheets.length; i++) {
        try {
          var rules = sheets[i].cssRules;
        } catch (e) {
          console.warn("Stylesheet could not be loaded: "+sheets[i].href);
          continue;
        }

        if (rules != null) {
          for (var j = 0; j < rules.length; j++) {
            var rule = rules[j];
            if (typeof(rule.style) != "undefined") {
              var match = null;
              try {
                match = el.querySelector(rule.selectorText);
              } catch(err) {
                console.warn('Invalid CSS selector "' + rule.selectorText + '"', err);
              }
              if (match) {
                var selector = selectorRemap ? selectorRemap(rule.selectorText) : rule.selectorText;
                css += selector + " { " + rule.style.cssText + " }\n";
              } else if(rule.cssText.match(/^@font-face/)) {
                css += rule.cssText + '\n';
              }
            }
          }
        }
      }
      return css;
    }

    function getDimension(el, clone, dim) {
      var v = (el.viewBox && el.viewBox.baseVal && el.viewBox.baseVal[dim]) ||
        (clone.getAttribute(dim) !== null && !clone.getAttribute(dim).match(/%$/) && parseInt(clone.getAttribute(dim))) ||
        el.getBoundingClientRect()[dim] ||
        parseInt(clone.style[dim]) ||
        parseInt(window.getComputedStyle(el).getPropertyValue(dim));
      return (typeof v === 'undefined' || v === null || isNaN(parseFloat(v))) ? 0 : v;
    }

    function reEncode(data) {
      data = encodeURIComponent(data);
      data = data.replace(/%([0-9A-F]{2})/g, function(match, p1) {
        var c = String.fromCharCode('0x'+p1);
        return c === '%' ? '%25' : c;
      });
      return decodeURIComponent(data);
    }

    out$.svgAsDataUri = function(el, options, cb) {
      options = options || {};
      options.scale = options.scale || 1;
      var xmlns = "http://www.w3.org/2000/xmlns/";

      inlineImages(el, function() {
        var outer = document.createElement("div");
        var clone = el.cloneNode(true);
        var width, height;
        if(el.tagName == 'svg') {
          width = options.width || getDimension(el, clone, 'width');
          height = options.height || getDimension(el, clone, 'height');
        } else if(el.getBBox) {
          var box = el.getBBox();
          width = box.x + box.width;
          height = box.y + box.height;
          clone.setAttribute('transform', clone.getAttribute('transform').replace(/translate\(.*?\)/, ''));

          var svg = document.createElementNS('http://www.w3.org/2000/svg','svg')
          svg.appendChild(clone)
          clone = svg;
        } else {
          console.error('Attempted to render non-SVG element', el);
          return;
        }

        clone.setAttribute("version", "1.1");
        clone.setAttributeNS(xmlns, "xmlns", "http://www.w3.org/2000/svg");
        clone.setAttributeNS(xmlns, "xmlns:xlink", "http://www.w3.org/1999/xlink");
        clone.setAttribute("width", width * options.scale);
        clone.setAttribute("height", height * options.scale);
        clone.setAttribute("viewBox", [
          options.left || 0,
          options.top || 0,
          width,
          height
        ].join(" "));

        outer.appendChild(clone);

        var css = styles(el, options.selectorRemap);
        var s = document.createElement('style');
        s.setAttribute('type', 'text/css');
        s.innerHTML = "<![CDATA[\n" + css + "\n]]>";
        var defs = document.createElement('defs');
        defs.appendChild(s);
        clone.insertBefore(defs, clone.firstChild);

        var svg = doctype + outer.innerHTML;
        var uri = 'data:image/svg+xml;base64,' + window.btoa(reEncode(svg));
        if (cb) {
          cb(uri);
        }
      });
    }

    out$.svgAsPngUri = function(el, options, cb) {
      out$.svgAsDataUri(el, options, function(uri) {
        var image = new Image();
        image.onload = function() {
          var canvas = document.createElement('canvas');
          canvas.width = image.width;
          canvas.height = image.height;
          var context = canvas.getContext('2d');
          if(options && options.backgroundColor){
            context.fillStyle = options.backgroundColor;
            context.fillRect(0, 0, canvas.width, canvas.height);
          }
          context.drawImage(image, 0, 0);
          var a = document.createElement('a'), png;
          try {
            png = canvas.toDataURL('image/png');
          } catch (e) {
            if ((typeof SecurityError !== 'undefined' && e instanceof SecurityError) || e.name == "SecurityError") {
              console.error("Rendered SVG images cannot be downloaded in this browser.");
              return;
            } else {
              throw e;
            }
          }
          cb(png);
        }
        image.src = uri;
      });
    }

    out$.saveSvgAsPng = function(el, name, options) {
      options = options || {};
      out$.svgAsPngUri(el, options, function(uri) {
        var a = document.createElement('a');
        a.download = name;
        a.href = uri;
        document.body.appendChild(a);
        a.addEventListener("click", function(e) {
          a.parentNode.removeChild(a);
        });
        a.click();
      });
    }

    // if define is defined create as an AMD module
    if (typeof define !== 'undefined') {
      define(function() {
        return out$;
      });
    }

  })();
    
    function svgToPng(nom) {
        //var saveSvgAsPng = require(['js/saveSvgAsPng']);
        // **** saveSvgAsPng ****
        if ( $("#map").length > 0 ) {
        // hacer algo aquí si el elemento existe
            saveSvgAsPng(d3.select('#map svg').node(), nom+'.png');
        }else{
            saveSvgAsPng(d3.select('svg').node(), nom+'.png');
        }   
        
    }
</script>
        
        
        <script src="http://requirejs.org/docs/release/2.3.2/minified/require.js"></script>
        <script>
            require(['js/excellentexport'], function(ee) {
                window.ExcellentExport = ee;
            });
        </script>
        
<!--        <script src='js/saveSvgAsPng.js'></script>-->
        
      
        
        
        
<script type="text/javascript">
    var titulo_des_graf="Indicador";
    var estados = estados_global;
    var atributos = atributos_global;
    var anioo;
  
    // docuemento general
    $(document).ready(function () 
    {
      titulo_des_graf = atributos.indicator_code;
      //$('#loader').delay(2000).fadeOut("slow");
    });

    function gen(props) 
    {
      var chart = bb.generate({
        bindto: '.info',
        padding: {
          top: 10,
          left: 30,
          right: 10
        },
        data: {
          x: 'Entidad',
          columns: [busqueda_anios(),props,busqueda_mexico()]
        },
        tooltip: {
          format: {
              value: function(value) {
                  return d3.format(",.2f")(value)
              }
          }
        },
        axis: {
          x: {
            type: 'timeseries',
            tick: {
              rotate: -90,
              format: function (x) { return x.getFullYear(); }
            },
            height: 35,
          },
          y: {
            tick: {
              format: d3.format(".0f")
            }
          }
       },
        color: {
          pattern: ['#00AEEF', 'rgba(255,0,0,0.8)']
        },
        size: {
          width: 260,
          height: 200
        },
        legend: {
          show: false
        },
        grid: {
          x: {
            show: false
          },
          y: {
            show: true
          }
        }

      });
    }

    function busqueda_estado(cadena) 
    {
      for (var i = 0; i < estados.length; i++) 
      {
        if (estados[i][0] == cadena) 
        {
          return parseFloat(estados[i][1]);
        }
      }
    }

    function busqueda_indice(cadena) {
      for (var i = 0; i < estados.length; i++) {
        if (estados[i][0] == cadena) {
          return parseFloat(i);
        }
      }
    }

    function busqueda_mexico() 
    {
      var arrray=[];
      for (var i = 0; i < estados.length; i++) 
      {
        if (estados[i][0] == "Estados Unidos Mexicanos") 
        {
          for(var j=0;j< estados[i].length;j++)
          {
            arrray.push(estados[i][j])
          }
        }
      }
      return arrray;
    }


    function busqueda_anios() 
    {
      var arrray=[];
      for (var i = 0; i < estados.length; i++) 
      {
        if (estados[i][0] == "Entidad") 
        {
          for(var j=0;j< estados[i].length;j++)
          {
            arrray.push(estados[i][j])
          }
        }
      }
      return arrray;
    }

    function busqueda_estado_posicion(cadena, posicion) 
    {
      for (var i = 0; i < estados.length; i++) 
      {
        if (estados[i][0] == cadena)
        {
          return parseFloat(estados[i][posicion]);
        }
      }
    }

    function busqueda_anio(cadena) 
    {
      for (var i = 0; i < estados[0].length; i++) 
      {
        if (estados[0][i] == cadena) 
        {
          return i;
        }
      }
    }

    //variable de mapa
    var img;
    var data_url;
    var locked = false;
    var map ;


    function init_map()
    {
        map = L.map('map',
        {
            scrollWheelZoom: false,
            maxZoom: 14,
            minZomm: 5,
        }).setView([24.8, -100], 5);

    L.tileLayer('http://{s}.google.com/vt/?hl=es&x={x}&y={y}&z={z}&s={s}&apistyle=s.t%3A5|p.l%3A53%2Cs.t%3A1314|p.v%3Aoff%2Cp.s%3A-100%2Cs.t%3A3|p.v%3Aon%2Cs.t%3A2|p.v%3Aoff%2Cs.t%3A4|p.v%3Aoff%2Cs.t%3A3|s.e%3Ag.f|p.w%3A1|p.l%3A100%2Cs.t%3A18|p.v%3Aoff%2Cs.t%3A49|s.e%3Ag.s|p.v%3Aon|p.s%3A-19|p.l%3A24%2Cs.t%3A50|s.e%3Ag.s|p.v%3Aon|p.l%3A15&style=47,37', {
      subdomains: ['mt0', 'mt1', 'mt2', 'mt3'],
      maxZoom: 14,
      minZomm: 5,
      attribution: '&copy <a href="https://www.mapbox.com/map-feedback/">Mapbox</a> &copy <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> <strong><a href="https://www.mapbox.com/map-feedback/" target="_blank">Improve this map</a></strong>',
      id: 'mapbox.light',
    }).addTo(map);

    if (/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)) {
      map.dragging.disable();
    }

    // control that shows state info on hover
    var info = L.control();
    info.onAdd = function (map) {
      this._div = L.DomUtil.create('div', 'infos hide');
      this.update();
      return this._div;
    };

    var res = atributos.Serie[0].CobTemporal_ser;
    anioo = res.split('-');

    info.update = function (props) 
    {      
      $('.infos').removeClass('hide');
      $('.info2').removeClass('hide');
      if (props != undefined) {
        this._div.innerHTML = '<div><h5 style="font-weight:bold">' + props.nom_ent + '</h5><br><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b style="font-size: 20px;color: #00aeef;">' + busqueda_estado(props.nom_ent).toFixed(2)/*props.density*/ + '</b><br/><b style="padding-left:28px;color:#999999;">(' + anioo[1] + ')</b><p style="position: absolute;bottom: 71%;left: 35%;font-size: 15px;text-overflow: ellipsis;overflow: hidden;white-space: nowrap;width: 164px;">'+titulo_des_graf+'</p></div></div><div class="info"></div>';
        gen(estados[busqueda_indice(props.nom_ent)]);
      }
    };

    info.addTo(map);
    // get color depending on population density value
    // function getColor(d) {
    // 	return d > 1000 ? '#800026' :
    // 	       d > 500  ? '#BD0026' :
    // 	       d > 200  ? '#E31A1C' :
    // 	       d > 100  ? '#FC4E2A' :
    // 	       d > 50   ? '#FD8D3C' :
    // 	       d > 20   ? '#FEB24C' :
    // 	       d > 10   ? '#FED976' :
    // 	                  '#FFEDA0';
    // }

    function getColor(d) {
      return d > 100 ? '#004b67' :
        d > 50 ? '#007dab' :
          d > 20 ? '#01baff' :
            '#45ccff';
    }

    function getColoR(number) 
    {
      return brew.getColorInRange(number);
    }

    function style(feature) 
    {
      var res = String(getColoR(busqueda_estado(feature.properties.nom_ent))).split(",");
      return {
        weight: 0.5,
        opacity: 1,
        color: '#000',
        dashArray: '1',
        fillOpacity: 1,
        // fillColor: getColoR(feature.properties.density),
        fillColor: getColoR(busqueda_estado(feature.properties.nom_ent)),
        className: "c" + res[1]
      };
    }

    function highlightFeature(e) 
    {
      if (locked == false) {
        var layer = e.target;
        layer.setStyle({
          weight: 2,
          color: '#ccc',
          dashArray: '',
          fillOpacity: 1
        });
        if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
          layer.bringToFront();
        }
        info.update(layer.feature.properties);
      }
    }

    var geojson;
    function resetHighlight(e) 
    {
      geojson.resetStyle(e.target);
      info.update(); 
    }

    function zoomToFeature(e) {
      map.fitBounds(e.target.getBounds());
    }

    function onEachFeature(feature, layer) {
      layer.on({
        mouseover: highlightFeature,
        mouseout: resetHighlight,
        mousedown: function (e) {
          if (locked == true) {
            locked = false;
            (function ($) {
              $(".info2").css("border", "none");
              $(".infos").css("border", "none");
            } (jQuery));
          }
          else {
            locked = true;
            (function ($) {
              //	$(".info2").css("border","5px solid #00cc99");
              $(".info2").css("border-bottom", "5px solid rgb(107, 174, 214)");
              $(".info2").css("border-left", "5px solid rgb(107, 174, 214)");
              $(".info2").css("border-right", "5px solid rgb(107, 174, 214)");
              $(".infos").css("border-top", "5px solid rgb(107, 174, 214)");
              $(".infos").css("border-left", "5px solid rgb(107, 174, 214)");
              $(".infos").css("border-right", "5px solid rgb(107, 174, 214)");
              //								$(".infos").css("border","5px solid #00cc99");
            } (jQuery));
          }
          // 			resetHighlight(e);
        },
        //          click: zoomToFeature
      });
    }

    function highlightFromLegend(e) 
    {
      (function ($) {
        $("svg path." + e).addClass("highlighted");
        var r = $("svg path." + e);
        for (var i = 0; i < r.length; i++) {
          r[i].classList.add("highlighted");
        }
      } (jQuery));
    }

    function clearHighlight() {
      (function ($) {

        $("path").removeClass("highlighted");
        var r = $("path");
        for (var i = 0; i < r.length; i++) {
          r[i].classList.remove("highlighted");
        }
      } (jQuery));
    }

    var brew = new classyBrew();
    var values = [];
    var values2 = [];
    for (var i = 0; i < statesData.features.length; i++) {
      if (statesData.features[i].properties.nom_ent == null) continue;
      values.push(busqueda_estado(statesData.features[i].properties.nom_ent));
    }

    brew.setSeries(values);
    brew.setNumClasses(4);
    brew.setColorCode("Purples");
    brew.classify('jenks');

    
    geojson = L.geoJson(statesData, {
      style: style,
      onEachFeature: onEachFeature
    }).addTo(map);



    map.attributionControl.addAttribution('');
    var legend = L.control();
    legend.onAdd = function (map) {
      var div = L.DomUtil.create('g', 'info2 legend'),
        grades = brew.getBreaks(),//[0, 20, 50, 100],
        labels = [],
        from, to;
      for (var i = 0; i < grades.length - 1; i++) {
        from = grades[i];
        to = grades[i + 1];
        var res = String(getColoR(from)).split(",");
        labels.push(
          '<g style="float:left; text-align: center;"><i class="leyenda" onmouseover="highlightFromLegend(\'c' + res[1] + '\')" onmouseout="clearHighlight();" style="width:100%; background:' + getColoR(from) + '"></i><br>' +
          from.toFixed(0) + (to.toFixed(0) ? '&ndash;' + to.toFixed(0) : '+') + '</g>');
      }
      div.innerHTML = labels.join('');
      return div;
    };
    legend.addTo(map);
        legent.addTo('canvas');
    }
    

        </script>
	</body>
</html>